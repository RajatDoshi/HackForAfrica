{% extends "layout.html" %}

{% block importCssAndOtherLinks %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/userLand.css') }}">
{% endblock %}

{% block main %}
      <div class="page-wrapper chiller-theme toggled">
         <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
         <i class="fas fa-bars"></i>
         </a>
         <nav id="sidebar" class="sidebar-wrapper">
            <div class="sidebar-content">
               <div class="sidebar-brand">
                  <a class = "navbar-brand " style= "color:white;font-size:1.3rem;font-family: 'Schoolbell', cursive;" href = "#"> <span style = "color:green">Hack</span><span style = "color:rgb(248, 206, 18)">ForAf</span><span style = "color:red">rica</span></a>
               </div>
               <div style="padding-top: 10%" class="sidebar-header">
                  <div style="text-align: center" class="user-pic">
                     <img  class="img-responsive img-rounded" src="https://media.istockphoto.com/photos/portrait-of-smiling-handsome-man-in-blue-tshirt-standing-with-crossed-picture-id1045886560?k=6&m=1045886560&s=612x612&w=0&h=hXrxai1QKrfdqWdORI4TZ-M0ceCVakt4o6532vHaS3I=" alt="User picture">
                  </div>
                  <div class="user-info">
                     <span style="color: black; font-size: 2rem; text-align: center" class="user-name">
                        <strong>{{nameVar}}</strong>
                     </span>
                     <span style="font-size: 1rem; text-align: center" class="user-status">
                        <span>Patient</span>
                     </span>
                  </div>
               </div>
               <!-- sidebar-search  -->
               <div class="sidebar-menu">
                  <ul>
                     <li class="header-menu">
                        <div style="text-align: center"><span>Medical Profile</span></div>
                     </li>
                     <li class="sidebar-dropdown">
                        <a href="#">
                           <i class="fas fa-id-card"></i>
                           <span >Characteristics</span>
                        </a>
                        <div class="sidebar-submenu">
                           <ul>
                              <li><a>Sex: Male</a></li>
                              <li><a>Height: 5'10</a></li>
                              <li><a>Weight: 170 lbs</a></li>
                           </ul>
                        </div>
                     </li>
                     <li class="sidebar-dropdown">
                        <a href="#">
                           <i class="fa fa-user-md"></i>
                           <span>Previous Doctors</span>
                        </a>
                        <div class="sidebar-submenu">
                           <ul>
                              <li><a href="#">Dr. Ronald Shiller</a></li>
                              <li><a href="#">Dr. George Murphy</a></li>
                              <li><a href="#">Dr. Harold Spencer</a></li>
                           </ul>
                        </div>
                     </li>
                     <li class="sidebar-dropdown">
                        <a href="#">
                           <i class="fas fa-heartbeat"></i>
                           <span>Medical History</span>
                        </a>
                        <div class="sidebar-submenu">
                           <ul>
                              <li><a href="#">Breathing Problems</a></li>
                              <li><a href="#">Migraines</a></li>
                              <li><a href="#">Spine Surgery</a></li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
            </div>
         </nav>
         <!-- sidebar-wrapper  -->
         <main class="page-content">
            <div class="container-fluid" style="padding-left: 10%; padding-top: 5%">
               <section id="calendar" style="text-align: center">
                  <h1 onclick="speak(this.innerHTML)">Calendar</h1>
                  <div class="container">
                     <div class="row">
                        <div style="width:90%">
                           <ul class="event-list">
                              <li >
                                 <time>
                                 <span class="day">20</span>
                                 <span class="month">Jan</span>
                                 </time>
                                 <div class="info" style="text-align: center">
                                    <h2 class="title">Checkup</h2>
                                    <br>
                                    <p class="desc">Dr. Bob Smith ● 5:00pm EST</p>
                                    <br>
                                    <ul>
                                       <li style="width:33%;">Join <span class="fa fa-video-camera"></span></li>
                                       <li style="width:34%;">Message Doctor <span class="fa fa-comment"></span></li>
                                       <li style="width:33%;">Cancel <span class="fa fa-trash-o"></span></li>
                                    </ul>
                                 </div>
                              </li>
                              <li >
                                 <time>
                                 <span class="day">21</span>
                                 <span class="month">Jan</span>
                                 </time>
                                 <div class="info" style="text-align: center">
                                    <h2 class="title">Physical Examination</h2>
                                    <br>
                                    <p class="desc">Dr. Bob Smith ● 6:00pm EST</p>
                                    <ul>
                                       <li style="width:33%;">Join <span class="fa fa-video-camera"></span></li>
                                       <li style="width:34%;">Message Doctor <span class="fa fa-comment"></span></li>
                                       <li style="width:33%;">Cancel <span class="fa fa-trash-o"></span></li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </section>
            </div>
         </main>
         <!-- page-content" -->
      </div>
      <!-- page-wrapper -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script>
         jQuery(function ($) {
         $(".sidebar-dropdown > a").click(function() {
         $(".sidebar-submenu").slideUp(200);
         if (
         $(this)
         .parent()
         .hasClass("active")
         ) {
         $(".sidebar-dropdown").removeClass("active");
         $(this)
         .parent()
         .removeClass("active");
         } else {
         $(".sidebar-dropdown").removeClass("active");
         $(this)
         .next(".sidebar-submenu")
         .slideDown(200);
         $(this)
         .parent()
         .addClass("active");
         }
         });
         $("#close-sidebar").click(function() {
         $(".page-wrapper").removeClass("toggled");
         });
         $("#show-sidebar").click(function() {
         $(".page-wrapper").addClass("toggled");
         });
         });
      </script>
      <script>
            //Variable that actually performs the text to speech
                var synth = window.speechSynthesis;
                
                //If we want a form or input of text to be converted to speech
                //Used this for initial coding tests; keep for future debugging
                //var inputForm = document.querySelector('form');
                //var inputTxt = document.querySelector('.txt');
                
                //var voiceSelect = document.querySelector('select');
                
                //var pitch = document.querySelector('#pitch');
                var pitchValue = 1 //Subject to change
                //var rate = document.querySelector('#rate');
                var rateValue = 0.8 //Subject to change
                
                var voices = [];
                
                function populateVoiceList()
                {
                voices = synth.getVoices().sort(function (a, b)
                {
                    const aname = a.name.toUpperCase(), bname = b.name.toUpperCase();
                    if ( aname < bname ) return -1;
                    else if ( aname == bname ) return 0;
                    else return +1;
                    //Was for internal purposes of alphabetizing voices
                }
                );
                
                //Additional functionality of having a choice of the different voices (accents) if needed
                
                //var selectedIndex = voiceSelect.selectedIndex < 0 ? 0 : voiceSelect.selectedIndex;
                //voiceSelect.innerHTML = '';
                // for(i = 0; i < voices.length ; i++) {
                //   var option = document.createElement('option');
                //   option.textContent = voices[i].name + ' (' + voices[i].lang + ')';
                    
                //   if(voices[i].default) {
                //     option.textContent += ' -- DEFAULT';
                //   }
                
                //   option.setAttribute('data-lang', voices[i].lang);
                //   option.setAttribute('data-name', voices[i].name);
                //   voiceSelect.appendChild(option);
                // }
                // voiceSelect.selectedIndex = selectedIndex;
                }
                
                populateVoiceList();
                if (speechSynthesis.onvoiceschanged !== undefined)
                {
                speechSynthesis.onvoiceschanged = populateVoiceList;
                }
                
                function speak(elmt){
                    if (synth.speaking)
                    {
                        console.error('speechSynthesis.speaking');
                        return;
                    }
                    if (elmt !== '')
                    {
                    //Just calling this var utterance b/c of the class name lmao
                    var utterance = new SpeechSynthesisUtterance(elmt);
                    utterance.onend = function (event)
                    {
                        console.log('SpeechSynthesisUtterance.onend');
                    }
                    utterance.onerror = function (event)
                    {
                        console.error('SpeechSynthesisUtterance.onerror');
                    }
                    //Removed this line afterward since we are sticking with one fixed voice
                    //var selectedOption = voiceSelect.selectedOptions[0].getAttribute('data-name');
                    for(i = 0; i < voices.length ; i++)
                    {
                    if(voices[i].name === "Google US English")
                    {
                        utterance.voice = voices[i];
                        break;
                    }
                    }
                    utterance.pitch = pitchValue;
                    //Setting the rate to fixed at 0.85 so people less comfortable with English can hear but it isn't too slow
                    utterance.rate = rateValue;
                    synth.speak(utterance);
                    //document.write(selectedOption)
                    //document.write(inputTxt.value)
                }
                }
                
                // inputForm.onsubmit = function(event) {
                //   event.preventDefault();
                
                //   speak();
                
                //   inputTxt.blur();
                // }
                //For if we want to give them the option of pitch/rate
                // pitch.onchange = function() {
                //   pitchValue.textContent = pitch.value;
                // }
                
                // rate.onchange = function() {
                //   rateValue.textContent = rate.value;
                // }
                //For aforementioned functionality of choosing voice/accent
                // voiceSelect.onchange = function(){
                //   speak();
                // }
            </script>
{% endblock %}